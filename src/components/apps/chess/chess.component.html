<div class="h-full w-full flex flex-col items-center justify-center bg-gray-800 p-4 font-sans">
  <div class="w-full max-w-2xl flex justify-between items-start gap-4">

    <!-- Player 2 (AI) Info -->
    <div class="flex-1 flex flex-col items-center">
      <h3 class="text-lg font-semibold text-white mb-2">AI (Black)</h3>
      <div class="captured-pieces-box">
        @for (piece of capturedByWhite(); track $index) {
          <i class="captured-piece"
             [ngClass]="pieceIcons()['white'][piece.type]"
             [class.text-white]="piece.player === 'white'"></i>
        }
      </div>
    </div>

    <!-- Main Board and Status -->
    <div class="flex flex-col items-center">
      <div class="mb-2 text-center h-12 flex flex-col justify-center">
        @if(gameOver()) {
          <h2 class="text-2xl font-bold text-yellow-400">{{ gameOver() }}</h2>
        } @else {
          <h2 class="text-xl font-bold text-white">{{ statusMessage() }}</h2>
        }
      </div>
      
      <div class="grid grid-cols-8 grid-rows-8 w-full max-w-lg aspect-square shadow-2xl border-4 border-yellow-800">
        @for (row of board(); track $index; let r = $index) {
          @for (square of row; track $index; let c = $index) {
            <div (click)="handleSquareClick(r, c)"
                 class="chess-square relative"
                 [class.light]="(r + c) % 2 === 0"
                 [class.dark]="(r + c) % 2 !== 0"
                 [class.selected]="selectedSquare()?.row === r && selectedSquare()?.col === c">
              @if (square) {
                <i class="chess-piece" 
                   [ngClass]="pieceIcons()[square.player][square.type]"
                   [class.text-white]="square.player === 'white'"
                   [class.text-black]="square.player === 'black'"></i>
              }
              @if (validMoves().has(r + ',' + c)) {
                  <div class="valid-move-indicator"></div>
              }
            </div>
          }
        }
      </div>
      <button (click)="resetGame()" class="mt-4 px-6 py-2 bg-yellow-700 hover:bg-yellow-600 rounded-md text-white font-bold shadow-lg">
        New Game
      </button>
    </div>

    <!-- Player 1 (Human) Info -->
    <div class="flex-1 flex flex-col items-center">
      <h3 class="text-lg font-semibold text-white mb-2">You (White)</h3>
      <div class="captured-pieces-box">
        @for (piece of capturedByBlack(); track $index) {
          <i class="captured-piece"
             [ngClass]="pieceIcons()['black'][piece.type]"
             [class.text-black]="piece.player === 'black'"></i>
        }
      </div>
    </div>

  </div>
</div>