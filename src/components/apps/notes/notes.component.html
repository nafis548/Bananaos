<div class="h-full flex bg-gray-800 text-gray-200">
  <!-- Sidebar with notes list -->
  <div class="w-64 bg-gray-900/50 flex-shrink-0 flex flex-col">
    <div class="p-2 flex-shrink-0 border-b border-gray-700/50 flex items-center justify-between">
      <h2 class="text-lg font-bold">Notes</h2>
      <button (click)="createNewNote()" class="w-8 h-8 flex items-center justify-center hover:bg-gray-700 rounded-md" title="New Note">
        <i class="fas fa-plus"></i>
      </button>
    </div>
    <div class="flex-1 overflow-y-auto">
      @for (note of notes(); track note.id) {
        <div (click)="selectNote(note)" 
             class="p-3 cursor-pointer border-l-4"
             [class.bg-gray-700/50]="selectedNoteId() === note.id"
             [class.accent-border]="selectedNoteId() === note.id"
             [class.border-transparent]="selectedNoteId() !== note.id"
             [class.hover:bg-gray-700/30]="selectedNoteId() !== note.id">
          <h3 class="font-semibold truncate">{{ note.title }}</h3>
          <p class="text-xs text-gray-400">{{ note.lastModified | date:'short' }}</p>
        </div>
      }
    </div>
  </div>

  <!-- Main Content - Editor -->
  <div class="flex-1 flex flex-col">
    @if (selectedNoteId() !== null) {
      <div class="p-2 flex-shrink-0 border-b border-gray-700/50 flex items-center justify-end">
        <button (click)="deleteSelectedNote()" class="w-8 h-8 flex items-center justify-center hover:bg-red-500/50 rounded-md text-red-400 hover:text-red-300" title="Delete Note">
          <i class="fas fa-trash"></i>
        </button>
      </div>
      <textarea class="flex-1 bg-gray-800 text-gray-200 p-4 font-sans text-base focus:outline-none resize-none"
                placeholder="Start writing your note..."
                [ngModel]="selectedNoteContent()"
                (ngModelChange)="selectedNoteContent.set($event)"></textarea>
    } @else {
      <div class="h-full flex items-center justify-center text-gray-500">
        <div class="text-center">
          <i class="fas fa-sticky-note text-5xl mb-4"></i>
          <p>Select a note or create a new one.</p>
        </div>
      </div>
    }
  </div>
</div>